<div class="col-xs-12 profile_contents" >
	<% unless @hero_name %>
            <div class="container"> 
             
             <div class="hero_warp">
             	<% @heros.each_with_index do |hero, i| %>
             	
               	<div class="hero_card panel-white" style="<%='display: none' if i > 2%>">
                	<div data-link="/over_tags/<%=@over_tag.id%>/detail" data-param="?hero_name=<%=hero.name%>" class="hero_card_top panel-hedding">
	                      <div class="play_time_grh">
                          		<div class="circle" id="circles-<%=i+5%>">
                          		</div>
                                <div class="card_top_hero_700">
                          		<h2 class="panel-title"><%=hero.name%></h2>
		                        </div>                                                   		
                          </div>
                          <div>
                          <div class="card_top_hero">
                          		<h2 class="panel-title"><%=hero.name%></h2>
                          </div>      
                          <div class="card_top_left">
                          
                          <div class="card_top_rank">
                          		<div class="kor_rank">
                                	<div>
                                		<img src="/images/kor_icon.png">
                                	</div>
                                	<div>
                                		<span class="top_rank_s">
                                			<span id="hero_time_played_local_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                		</span>
                                		<span class="top_rank_xs">(Top <span id="hero_time_played_local_rank_<%=i%>_per"></span>%)</span>
                                	</div>
                                </div>
                                <div class="global_rank">
                                	<div><img src="/images/global_icon.png"></div><div>
                                		<span class="top_rank_s">
                                			<span id="hero_time_played_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                		</span>
                                		<span class="top_rank_xs">(Top <span id="hero_time_played_rank_<%=i%>_per"></span>%)</span></div>
                                </div>
                           </div>     
                           <div class="card_top_winrate">
	                           	<div class="flex-box">
                               		<div class="card_top_title">승률</div>
                               		<div class="top_rank_s"><%= hero[KEY["승률"]].round(2) %></div>
                               	</div>
                           		<div class="progress win-rate">
										<div class="progress-bar progress-bar-win" role="progressbar" style="width:<%= hero[KEY["승률"]] %>%">W <%= hero[KEY["승리한 게임"]] %></div>
                                        <div class="progress-bar progress-bar-lose" role="progressbar" style="width:<%= 100.0 - hero[KEY["승률"]] %>%">
                                        	L <%= hero[KEY["치른 게임"]] - hero[KEY["승리한 게임"]] %>
                                        </div>
                                </div> 
                                
                           </div>
                           <div  class="card_top_reward">
                           		<div><div class="gold">금메달</div><div><img src="/images/gold_medal.png"><%= hero[KEY["메달 - 금"]].to_i %></div></div>                                
                           </div>
                           </div>
                           </div>               
                           
                                
                    </div>             
                	
                
                	
                    <div class="hero_card_bottom panel-body">
                          <div class="panal-important">
                          
                               	 <div class="important-data"> 
	                                <dl class="data">
	                                	<dt class="legion_icon top_rank_s">평균처치</dt>
	                                	<dd class="rank_dd"><%= hero[KEY["처치 - 평균"]] %></dd>
	                                </dl>
                                 	<dl class="rank"><dt class="legion_icon"><img src="/images/kor_icon.png"></dt>
                                 		<dd class="rank_dd top_rank_xs">
                                 			<span id="hero_avg_elimination_local_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                 			<span class="top_rank_xxs">(Top <span id="hero_avg_elimination_local_rank_<%=i%>_per"></span>%)</span>
                                 		</dd>
                                 	</dl> 
                                	<dl class="rank">
                                		<dt class="legion_icon">
                                			<img src="/images/global_icon.png">
                                		</dt>
                                		<dd class="rank_dd top_rank_xs">
                                			<span id="hero_avg_elimination_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                			<span class="top_rank_xxs">
                                				(Top <span id="hero_avg_elimination_rank_<%=i%>_per"></span>%)
                                			</span>
                                		</dd>
                                	</dl>
                                 </div>
                                 <div class="important-data"> 
	                                <dl class="data"><dt class="legion_icon top_rank_s">평균딜량</dt><dd class="rank_dd"><%= hero[KEY["준 피해 - 평균"]] %></dd></dl> 
                                 	<dl class="rank"><dt class="legion_icon"><img src="/images/kor_icon.png"></dt><dd class="rank_dd top_rank_xs">
                                 		<span id="hero_avg_damage_local_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                 		<span class="top_rank_xxs">(Top <span id="hero_avg_damage_local_rank_<%=i%>_per"></span>%)</span></dd></dl> 
                                	<dl class="rank"><dt class="legion_icon"><img src="/images/global_icon.png"></dt><dd class="rank_dd top_rank_xs">
                                		<span id="hero_avg_damage_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                		<span class="top_rank_xxs">(Top <span id="hero_avg_damage_rank_<%=i%>_per"></span>%)</span></dd></dl>			
                                 </div>
                                 <div class="important-data"> 
                                 	<dl class="data"><dt class="legion_icon top_rank_s">명중률</dt><dd class="rank_dd"><%= hero[KEY["명중률"]] %></dd></dl> 
                                 	<dl class="rank"><dt class="legion_icon"><img src="/images/kor_icon.png"></dt><dd class="rank_dd top_rank_xs">
                                 		
                                 		<span id="hero_accuracy_local_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                 		<span class="top_rank_xxs">(Top <span id="hero_accuracy_local_rank_<%=i%>_per"></span>%)</span></dd></dl> 
                                	<dl class="rank"><dt class="legion_icon"><img src="/images/global_icon.png"></dt><dd class="rank_dd top_rank_xs">
                                		
                                		<span id="hero_accuracy_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                		<span class="top_rank_xxs">(Top <span id="hero_accuracy_rank_<%=i%>_per"></span>%)</span></dd></dl>
                                </div>
                                <div class="important-data">                                 
	                                <dl class="data"><dt class="legion_icon top_rank_s">KDA</dt><dd class="rank_dd"><%= hero["KDA"] %></dd></dl> 
                                	<dl class="rank"><dt class="legion_icon"><img src="/images/kor_icon.png"></dt><dd class="rank_dd top_rank_xs">
                                		
                                		<span id="hero_kda_local_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                		<span class="top_rank_xxs">(Top <span id="hero_kda_local_rank_<%=i%>_per"></span>%)</span></dd></dl> 
                                	<dl class="rank"><dt class="legion_icon"><img src="/images/global_icon.png"></dt><dd class="rank_dd top_rank_xs">
                                		
                                		<span id="hero_kda_rank_<%=i%>" data-param="<%= hero.id %>"></span>위
                                		<span class="top_rank_xxs">(Top <span id="hero_kda_rank_<%=i%>_per"></span>%)</span></dd></dl>
                                </div>
                          </div>
                          <div class="trend_grh_warp">
                            <div class="trend-grh_header">
                            	<div class="legion_icon top_rank_s">트랜드 평균 그래프</div>
	                            <div class="rank_dd"> 
    	                        	 <div class="btn-group role_group" role="group" aria-label="...">
										  <button type="button" class="btn trend_btn active">평균처치</button>
										  <button type="button" class="btn trend_btn">평균딜량</button>
										  <button type="button" class="btn trend_btn">명중률</button>
                    	          			<button type="button" class="btn trend_btn">KDA</button>
                            		</div> 
                            	</div>
                            </div>
                          	<div id="chart_<%=i+1%>" class="trend_grh"style="height:120px;"></div>
                          </div>
                    </div>
                
                </div>
                <% end %>
               	<div id="more_hero" onclick="javascript: show_hero_data();">더보기</div>
                
                
   
            <!-- 왼쪽 내용 끝. -->    
            </div>
            <!-- 왼쪽 테두리 끝 -->
            
            
            <!-- 오른쪽 테두리 시작. -->
            <div class="static_warp">
                       
            <div class="static_card panel-white">
                   	<div class="static_card_top panel-hedding">
                         <div>평균 통계</div>
                         <div class="btn-group role_group" role="group" aria-label="...">
							  <button type="button" onclick="javascript:change_avg('total')" class="btn role_btn active">전체</button>
							  <button type="button" onclick="javascript:change_avg('offense')" class="btn role_btn">공격</button>
							  <button type="button" onclick="javascript:change_avg('rush')" class="btn role_btn">돌격</button>
                              <button type="button" onclick="javascript:change_avg('support')" class="btn role_btn">지원</button>
                              <button type="button" onclick="javascript:change_avg('defense')" class="btn role_btn">방어</button>
						</div> 
                        <div>
                        랭크
                        <select name="drop-average" id="drop-average" style="width:60px;">
						      <option value='kor' data-image="/images/kor_drop_icon.png" data-imagecss="kor" data-title="kor"></option>
						      <option value='global' data-image="/images/global_icon.png" data-imagecss="global" data-title="global"></option>
      
						</select>
                        </div>
                     </div>
                     <div id="avg_total">
                     	<%= render 'detail_page_right_avr_total' %>
                     </div>
                     <div id="avg_offense" style="display: none">
                     	<%= render 'detail_page_right_avr_offense' %>
                     </div>
                     <div id="avg_rush" style="display: none">
                     	<%= render 'detail_page_right_avr_rush' %>
                     </div>
                     <div id="avg_support" style="display: none">
                     	<%= render 'detail_page_right_avr_support' %>
                     </div>
                     <div id="avg_defense" style="display: none">
                     	<%= render 'detail_page_right_avr_defense' %>
                     </div>
                </div>
               	<div class="static_card panel-white">
                   	<div class="static_card_top panel-hedding">
                         <div>전투 통계</div>
                           <div class="btn-group role_group" role="group" aria-label="...">
							  <button type="button" onclick="javascript:change_fight('total')" class="btn role_btn active">전체</button>
							  <button type="button" onclick="javascript:change_fight('offense')" class="btn role_btn">공격</button>
							  <button type="button" onclick="javascript:change_fight('rush')" class="btn role_btn">돌격</button>
                              <button type="button" onclick="javascript:change_fight('support')" class="btn role_btn">지원</button>
                              <button type="button" onclick="javascript:change_fight('defense')" class="btn role_btn">방어</button>
						</div>
                        <div>
                        랭크
                        <select name="drop-combat" id="drop-combat" style="width:60px;">
						      <option value='kor' data-image="/images/kor_drop_icon.png" data-imagecss="kor" data-title="kor"></option>
						      <option value='global' data-image="/images/global_icon.png" data-imagecss="global" data-title="global"></option>
      
						</select> 
                        </div>
                     </div>
                     <div id="fight_total">
                     	<%= render 'detail_page_right_fight_total' %>
                     </div>
                     <div id="fight_offense" style="display: none">
                     	<%= render 'detail_page_right_fight_offense' %>
                     </div>
                     <div id="fight_rush" style="display: none">
                     	<%= render 'detail_page_right_fight_rush' %>
                     </div>
                     <div id="fight_support" style="display: none">
                     	<%= render 'detail_page_right_fight_support' %>
                     </div>
                     <div id="fight_defense" style="display: none">
                     	<%= render 'detail_page_right_fight_defense' %>
                     </div>
                </div>
                
                
                
                
                <div class="static_card panel-white">
                   	<div class="static_card_top panel-hedding">
                        <div> 치유/지원</div>
                           <div class="btn-group role_group" role="group" aria-label="...">
							  <button type="button" onclick="javascript:change_heal('total')" class="btn role_btn active">전체</button>
							  <button type="button" onclick="javascript:change_heal('offense')" class="btn role_btn">공격</button>
							  <button type="button" onclick="javascript:change_heal('rush')" class="btn role_btn">돌격</button>
                              <button type="button" onclick="javascript:change_heal('support')" class="btn role_btn">지원</button>
                              <button type="button" onclick="javascript:change_heal('defense')" class="btn role_btn">방어</button>
						</div> 
                        <div>
                        랭크
                        <select name="drop-heal" id="drop-heal" style="width:60px;">
						      <option value='kor' data-image="/images/kor_drop_icon.png" data-imagecss="kor" data-title="kor"></option>
						      <option value='global' data-image="/images/global_icon.png" data-imagecss="global" data-title="global"></option>
      
						</select> 
                        </div>
                     </div>
                     
                     <div id="heal_total">
                     	<%= render 'detail_page_right_heal_total' %>
                     </div>
                     <div id="heal_offense" style="display: none">
                     	<%= render 'detail_page_right_heal_offense' %>
                     </div>
                     <div id="heal_rush" style="display: none">
                     	<%= render 'detail_page_right_heal_rush' %>
                     </div>
                     <div id="heal_support" style="display: none">
                     	<%= render 'detail_page_right_heal_support' %>
                     </div>
                     <div id="heal_defense" style="display: none">
                     	<%= render 'detail_page_right_heal_defense' %>
                     </div>
                </div>
                
                <div class="static_card panel-white">
                   	<div class="static_card_top panel-hedding">
                        <div> 죽음</div>
                          <div class="btn-group role_group" role="group" aria-label="...">
							  <button type="button" onclick="javascript:change_death('total')" class="btn role_btn active">전체</button>
							  <button type="button" onclick="javascript:change_death('offense')" class="btn role_btn">공격</button>
							  <button type="button" onclick="javascript:change_death('rush')" class="btn role_btn">돌격</button>
                              <button type="button" onclick="javascript:change_death('support')" class="btn role_btn">지원</button>
                              <button type="button" onclick="javascript:change_death('defense')" class="btn role_btn">방어</button>
						</div> 
                        <div>
                        랭크
                        <select name="drop-death" id="drop-death" style="width:60px;">
						      <option value='kor' data-image="/images/kor_drop_icon.png" data-imagecss="kor" data-title="kor"></option>
						      <option value='global' data-image="/images/global_icon.png" data-imagecss="global" data-title="global"></option>
      
						</select> 
                        </div>
                     </div>
                     
                     <div id="death_total">
                     	<%= render 'detail_page_right_death_total' %>
                     </div>
                     <div id="death_offense" style="display: none">
                     	<%= render 'detail_page_right_death_offense' %>
                     </div>
                     <div id="death_rush" style="display: none">
                     	<%= render 'detail_page_right_death_rush' %>
                     </div>
                     <div id="death_support" style="display: none">
                     	<%= render 'detail_page_right_death_support' %>
                     </div>
                     <div id="death_defense" style="display: none">
                     	<%= render 'detail_page_right_death_defense' %>
                     </div>
                </div>
                
            </div>
            </div>
		<% else%>
			<%= render 'detail_page_hero' %>
		<% end %>
            </div>
            

<script>
	$(".hero_card_top.panel-hedding").click(function() {
	  if (typeof($(this).data("param"))  != "undefined"){
	    var link = $(this).data("link") + $(this).data("param");
	  	window.location = link;
	  }
	});
	

	function change_avg(flg){
		right_table_avg_hide();
		if (flg == "total") {
			$("#avg_total").show();
		}else if (flg == "offense") {
			$("#avg_offense").show();
		}else if (flg == "rush") {
			$("#avg_rush").show();
		}else if(flg == "support") {
			$("#avg_support").show();
		}else if (flg == "defense") {
			$("#avg_defense").show();
		}
	}
	
	function right_table_avg_hide(){
		$("#avg_total").hide();
		$("#avg_offense").hide();
		$("#avg_rush").hide();
		$("#avg_support").hide();
		$("#avg_defense").hide();
	}
	
	function change_fight(flg) {
		right_table_fight_hide();
		if (flg == "total") {
			$("#fight_total").show();
		}else if (flg == "offense") {
			$("#fight_offense").show();
		}else if (flg == "rush") {
			$("#fight_rush").show();
		}else if(flg == "support") {
			$("#fight_support").show();
		}else if (flg == "defense") {
			$("#fight_defense").show();
		}
	}
	
	function right_table_fight_hide(){
		$("#fight_total").hide();
		$("#fight_offense").hide();
		$("#fight_rush").hide();
		$("#fight_support").hide();
		$("#fight_defense").hide();
	}
	
	function change_heal(flg){
		right_table_heal_hide();
		if (flg == "total") {
			$("#heal_total").show();
		}else if (flg == "offense") {
			$("#heal_offense").show();
		}else if (flg == "rush") {
			$("#heal_rush").show();
		}else if(flg == "support") {
			$("#heal_support").show();
		}else if (flg == "defense") {
			$("#heal_defense").show();
		}
	}
	
	function right_table_heal_hide(){
		$("#heal_total").hide();
		$("#heal_offense").hide();
		$("#heal_rush").hide();
		$("#heal_support").hide();
		$("#heal_defense").hide();
	}
	
	function change_death(flg){
		right_table_death_hide();
		if (flg == "total") {
			$("#death_total").show();
		}else if (flg == "offense") {
			$("#death_offense").show();
		}else if (flg == "rush") {
			$("#death_rush").show();
		}else if(flg == "support") {
			$("#death_support").show();
		}else if (flg == "defense") {
			$("#death_defense").show();
		}
	}
	
	function right_table_death_hide(){
		$("#death_total").hide();
		$("#death_offense").hide();
		$("#death_rush").hide();
		$("#death_support").hide();
		$("#death_defense").hide();
	}

	//도넛 그래프 스크립트

	
	setTimeout(make_circle, 2000);
	setTimeout(make_chart(0, 3), 2000);

	function make_circle(){
		var textclass = 'hero_circle';
		<% @heros.each_with_index do |hero, i| %>
			var id_num = <%= i + 5 %>;
			var child = document.getElementById('circles-' + id_num), percentage = <%= (hero[KEY["플레이 시간"]] / @main_hero_data[KEY["플레이 시간"]]) * 100 %>;
			circles.push(Circles.create({
				id:         child.id,
				value:		percentage,
				radius:     35,
				width:      8,
				colors:     <%= raw HERO_COLOR[hero.name] %>,
				text: 	    "<%= distance_of_time_in_words(Time.at(0), Time.at(hero[KEY["플레이 시간"]].to_i * 60)) %>",
				textClass : textclass,
				duration :0
			}));
			var hero_icon_url = "url(/images/hero_circle/"+ "<%= HERO_CIRCLE_IMG[hero.name]%>";
			document.getElementById('circles-'+id_num).style.backgroundImage = hero_icon_url;
		<% end %>
	}
	
	function make_chart(s_count, e_count){
		var userPoints = [[1,4213],[10,4000],[20,3800],[30,3500],[40,3345],[50,3214],[60,2945],[70,2754],[80,2541],[90,2421],[100,2000]]; 	//임시 데이타

		var jobPoints = [[18,3921]];
				  //임시 데이타
		//var userPoints = [];//실제 데이타는 아래와 같이 처리하세요.
		//for (var i=0; i<2*Math.PI; i+=0.1){ 
		//   cosPoints.push([i, Math.cos(i)]); 
		//} 
		 var n = $( '.trend_grh' ).length;
		for (var i = s_count+1; i < e_count+1; i++) {
		var chart_name ='chart_'+i;
		var plot = $.jqplot(chart_name, [userPoints, jobPoints], {  
				
			legend:{show:false,}, 
			highlighter:{show:false},
			
			series:[
					{
						label:'사용자',
					  	color : '#cc9e45', //Line Color
						lineWidth : 2,	//라인 두께
						markerOptions: {size:9,shadow:false},	//점 두께 http://www.jqplot.com/docs/files/jqPlotOptions-txt.html
						pointLabels: { show:true},
						shadow:false,
					},
					{
						label:'내 순위',
					  	color : '#000',
						lineWidth : 2,
						markerOptions : {size:10},	
						pointLabels:{ show:true, location:'s', ypadding:10 }
					}
			],
			axes:{
		      xaxis:{
	
				min:0, max:100, tickInterval:10, 
				
				tickOptions:{ 
					formatString: 'Top%d%',
					showGridline: false, 				//세로줄 없애기
					angle: -50,
					showTickMarks:false,
					fontsize:'20pt',
				},
				
				 rendererOptions: {
					tickInset: 0.2,                
	                
	            },
				drawMajorTickMarks: false,
		        autoscale: false,
		      },
		      yaxis:{
		         autoscale: true,
				 rendererOptions: {drawBaseline: false},
				 showTicks: false,  //세로축 정보
		      }
		    },
			grid:{
				drawGridlines :true, //그리드 그리기
				background:'#f3f3f3',
				shadow:false,
				drawBorder:0,
				
			}
		});
		
		}
	}	
</script>